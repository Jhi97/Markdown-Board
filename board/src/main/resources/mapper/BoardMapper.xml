<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jeon.board.mapper.BoardMapper">
    <!-- 글목록 -->
    <select id="getMain" resultType="com.jeon.board.dto.Post">
        SELECT * FROM post WHERE post_member = #{member_id} ORDER BY num DESC;
    </select>

    <!-- 카테고리 목록 -->
    <select id="getCategory" resultType="HashMap">
        SELECT category name, count(category) cnt FROM post GROUP BY category HAVING category IS NOT NULL;
    </select>

    <!-- 모든 글 개수 -->
    <select id="getCount">
        SELECT count(*) FROM post;
    </select>
    
    <!-- 글쓰기 -->
    <insert id="postWrite">
        INSERT INTO board.post (post_member, title, contents, category)
         VALUES(#{member_id}, #{post.title}, #{post.contents}, #{post.category});
    </insert>

    <!-- 글 상세보기 -->
    <select id="getView" resultType="com.jeon.board.dto.Post">
        SELECT * FROM post WHERE num = #{num};
    </select>
</mapper>